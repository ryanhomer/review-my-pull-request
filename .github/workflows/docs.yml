on:
  push:
    branches:
      - master

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          persist-credentials: false
      - name: Create Stuff
        run: |
          mkdir -p www/_site
          cat > www/_site/index.html <<EOL
          <!doctype html>
          <html>
            <head>
              <title>GH Pages deploy test</title>
            </head>
            <body>
              <p>Testing, testing, 1, 2, 3, 4.</p>
            </body>
          </html>
          EOL
      - name: Deploy
        if: success()
        run:
        env:
          EMAIL: ryan@murage.ca
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          BUILD_DIR: www
